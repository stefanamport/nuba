<div class="screen search">
  <h2 class="whitebox__title">Das hast heute gegessen:</h2>
  <div class="whitebox__content">
    
    <div class="loadingPlaceholder searchbar__loading" *ngIf="componentIsLoading"></div>

    <div class="foodlist" *ngIf="componentIsLoading == false">
      <ul class="datechooser foodlist__date">
        <li class="datechooser__block datechooser__prev">
          <button class="button button-small button-light" (click)="dateChange(-1)"><span class="fa fa-arrow-left" aria-hidden="true"></span>
          </button>
        </li>
        <li class="datechooser__block datechooser___actualdate">{{ selectedDate | date: 'd. MMM y' }}</li>
        <li class="datechooser__block datechooser___next">
          <button class="button button-small button-light" (click)="dateChange(1)"><span class="fa fa-arrow-right" aria-hidden="true"></span>
          </button>
        </li>
      </ul>
      <table class="foodtable" *ngIf="journalList.length > 0">
        <tr class="foodtable__entry foodentry" *ngFor="let entry of journalList">

        <template [ngIf]="!entry.editable">
            <td class="foodentry__block foodentry__block-time"> {{entry.date | date: 'HH:mm' }} Uhr</td>
            <td class="foodentry__block foodentry__block-foodname">
              {{entry.name}}
            </td>
            <td class="foodentry__block foodentry__block-quantity">{{entry.quantity}}{{entry.unit}}</td>
            <td class="foodentry__block foodentry__block-triggers">
              <button class="button button-small button-light" aria-label="bearbeiten" (click)="makeEditable(entry)"><span class="fa fa-edit" aria-hidden="true"></span>
              </button>
              <button class="button button-small button-light" aria-label="löschen" (click)="deleteEntry(entry)"><span class="fa fa-minus" aria-hidden="true"></span>
              </button>
            </td>
          </template>
          <template [ngIf]="entry.editable">
            <td class="foodentry__block foodentry__block-time">
              <input type="number" [(ngModel)]="entry.timeProvH" (keyup.enter)="updateEntry(entry)" maxlength="2" min="0" max="24" size="2" class="time small"/> :
              <input type="number" [(ngModel)]="entry.timeProvM" (keyup.enter)="updateEntry(entry)" maxlength="2" min="0" max="59" size="2" class="time small"/>
            </td>
            <td class="foodentry__block foodentry__block-foodname">
              {{entry.name}}
            </td>
            <td class="foodentry__block foodentry__block-quantity"><input type="number" [(ngModel)]="entry.quantity" (keyup.enter)="updateEntry(entry)" class="quantity small"/>
              {{entry.unit}}
            </td>
            <td class="foodentry__block foodentry__block-triggers">
              <button class="button button-small" aria-label="speichern" (click)="updateEntry(entry)"><span class="fa fa-check" aria-hidden="true"></span>
              </button>
            </td>
          </template>
        </tr>
      </table>
      <div *ngIf="!journalList.length">
        noch keine Einträge
      </div>
    </div>
  </div>
</div>
